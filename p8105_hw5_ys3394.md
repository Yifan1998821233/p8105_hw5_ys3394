p8105\_hw5\_ys3394
================
Yifan Su
2020-11-13

## Problem 1

  - The raw data *Washington Post* gatghered data mapping more than
    52,000 homicides in major American cities over the past dacedes, and
    includes where murder is common but unsolved.

  - In the dataset, it has 52179 rows and 12 columns. Variables in the
    data include characteristics of victims such as race, age and sex.
    Also, there are variables specify murders, including city, state
    they occured, and the reported date.

#### Summarize number of homicides within cities

``` r
# Read in the data
homicide_df = 
  read_csv("homicide_data/homicide-data.csv") %>% 
  mutate(
    city_state = str_c(city, state, sep = "_"),
    resolved = case_when(
      disposition == "Closed without arrest" ~ "unsolved",
      disposition == "Open/No arrest"        ~ "unsolved",
      disposition == "Closed by arrest"      ~ "solved",
    )
  ) %>% 
  select(city_state, resolved) %>% 
  filter(city_state != "Tulsa_AL") %>% 
  group_by(city_state) %>% 
  summarize(
    hom_total = n(),
    hom_unsolved = sum(resolved == "unsolved")
  )
```

#### `prop.test` for city Baltimore

``` r
baltimore_test =
prop.test(
  homicide_df %>% filter(city_state == "Baltimore_MD") %>% pull(hom_unsolved), 
  homicide_df %>% filter(city_state == "Baltimore_MD") %>% pull(hom_total)) %>%
  broom::tidy() %>% 
  select(estimate, conf.low, conf.high)
```

#### `prop.test` for each of the cities

``` r
results_df = 
  homicide_df %>% 
  mutate(
    prop_tests = map2(.x = hom_unsolved, .y = hom_total, ~prop.test(x = .x, n = .y)),
    tidy_tests = map(.x = prop_tests, ~broom::tidy(.x))
  ) %>% 
  select(-prop_tests) %>% 
  unnest(tidy_tests) %>% 
  select(city_state, estimate, conf.low, conf.high)
```

#### A plot showing estimates and CIs for each city

``` r
results_df %>% 
  mutate(city_state = fct_reorder(city_state, estimate)) %>% 
  ggplot(aes(y = city_state, x = estimate)) +
  geom_point() + 
  geom_errorbar(aes(xmin = conf.low, xmax = conf.high)) +
  labs(x = "Estimated proportion",
       y = "City",
       title = "Estimates and CIs for each city")
```

<img src="p8105_hw5_ys3394_files/figure-gfm/bar_plot-1.png" width="90%" />

## Problem 2 ideas â€¦

import one dataset

``` r
data_1 = read_csv("lda_data/con_01.csv")
```

    ## Parsed with column specification:
    ## cols(
    ##   week_1 = col_double(),
    ##   week_2 = col_double(),
    ##   week_3 = col_double(),
    ##   week_4 = col_double(),
    ##   week_5 = col_double(),
    ##   week_6 = col_double(),
    ##   week_7 = col_double(),
    ##   week_8 = col_double()
    ## )

``` r
path_df = 
  tibble(
    path = list.files("lda_data"),
  ) %>% 
  mutate(
    path = str_c("lda_data/", path),
    data = map(.............))
```

    ## Error: Problem with `mutate()` input `data`.
    ## x argument ".f" is missing, with no default
    ## i Input `data` is `map(.............)`.

``` r
read_csv(path_df$path[[1]])
```

    ## Error in is.connection(x): object 'path_df' not found
